\documentclass{report}

\usepackage{xeCJK}
\setCJKmainfont{SimSun}

\usepackage{listings}
\lstset{breaklines,numbers=left}
\usepackage{hyperref}
\usepackage{titletoc}
\usepackage[titletoc]{appendix}

\title{Embedded System Design Practice Report IV \\ Spring 2017}
\author{李约瀚 \\ 14130140331 \\ me@qinka.pro \\ qinka@live.com}

\begin{document}
    \maketitle
    \tableofcontents
    
    \chapter{License}
    \label{chap:license}
    This report and its codes are opened with GPL-3 license.
    
    The codes for these practices can be found on the%
    \href{https://github.com/Qinka/embedded-system-design-homework}{GitHub},
    and the ``codes'' include the source for this report(in \LaTeX).
    
    \chapter{Summary}
    \label{chap:summary}
    
    
    \begin{appendix}
        \chapter{Sources}
        \label{achap:source}

        In this section, there are the sources in the practices, while the hyper-link to GitHub will be given.

        \section{Memory Mapping}
        \label{src:memmap}
        
        The following is the
        \href{https://github.com/Qinka/embedded-system-design-homework/blob/master/practice4/led.h}{header file} 
        of source.
        \lstinputlisting[label={code:led.h},language=C,caption=Memory Mapping(led.h)]{practice4/led.h}

        The following is the  \href{https://github.com/Qinka/embedded-system-design-homework/blob/master/practice4/led.c}{source}.
        \lstinputlisting[label={code:led.h},language=C,caption=Memory Mapping(led.c)]{practice4/led.c}

         \section{User-space LEDs Matrix Driver(Using Memory Mapping)}
        \label{src:uslmd}
        
        The following is the \href{https://github.com/Qinka/embedded-system-design-homework/blob/master/led_mm_daemon/daemon.c}{source} of a user-space driver for a $4 \times 4$ .
        \lstinputlisting[label={code:d:daemon.c},language=C,caption=User-space LEDs Matrix Drive]{led_mm_daemon/daemon.c}


    \end{appendix}
    
\end{document}